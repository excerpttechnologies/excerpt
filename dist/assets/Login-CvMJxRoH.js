import{R as f,r as t,u as j,j as e,L as y}from"./index-Doui5iQ5.js";import{a as C}from"./index-NIGUFBhG.js";import{y as p,L as v}from"./ReactToastify-q7e6jleW.js";import"./clsx-B-dksMZM.js";const L=({onLogin:n})=>{const[i,u]=t.useState({email:"",password:""}),[s,l]=t.useState(!1),c=j(),m=t.useMemo(()=>({height:"400px"}),[]),h=t.useMemo(()=>({marginLeft:"350px",marginTop:"50px",marginBottom:"50px"}),[]),d=t.useCallback(r=>{const{name:o,value:a}=r.target;u(x=>({...x,[o]:a}))},[]),g=t.useCallback(async r=>{if(r.preventDefault(),!s){l(!0);try{const o=await C.post("http://localhost:8080/api/login",i,{timeout:5e3}),{role:a}=o.data;p.success("Login successful!",{position:"top-right",autoClose:2e3,onClose:()=>{a==="admin"&&(n(!0),c("/"))}})}catch(o){console.error("Login error:",o);let a="Login failed. Please check your credentials.";o.code==="ECONNABORTED"?a="Request timed out. Please try again.":o.response?.status===401?a="Invalid email or password.":o.response||(a="Network error. Please check your connection."),p.error(a,{position:"top-right",autoClose:3e3})}finally{l(!1)}}},[i,s,n,c]);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"wrapper login-1",style:m,children:e.jsxs("div",{className:"lcontainer",style:h,children:[e.jsx("div",{className:"col-left",children:e.jsxs("div",{className:"login-text",children:[e.jsx("h2",{children:"Welcome Back"}),e.jsxs("p",{children:["Create your account.",e.jsx("br",{})]}),e.jsx(y,{to:"/register",className:"btn",children:"Sign Up"})]})}),e.jsx("div",{className:"col-right",children:e.jsxs("div",{className:"login-form",children:[e.jsx("h2",{children:"Login"}),e.jsxs("form",{onSubmit:g,children:[e.jsx("p",{children:e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:i.email,onChange:d,required:!0,disabled:s,autoComplete:"email"})}),e.jsx("p",{children:e.jsx("input",{type:"password",name:"password",placeholder:"Password",value:i.password,onChange:d,required:!0,disabled:s,autoComplete:"current-password"})}),e.jsx("p",{children:e.jsx("button",{type:"submit",disabled:s,style:{opacity:s?.7:1,cursor:s?"not-allowed":"pointer"},children:s?"Logging in...":"Login"})}),e.jsx("p",{children:e.jsx("a",{href:"#",onClick:r=>r.preventDefault(),children:"Forgot Password?"})})]}),e.jsx(v,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,limit:3})]})})]})})})},S=f.memo(L);export{S as default};
